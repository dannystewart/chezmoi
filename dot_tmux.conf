##### Tmux Complete Reference #####

# Custom prefix key: Ctrl+A (default is Ctrl+B), use Ctrl+A Ctrl+A for literal
# Custom shortcuts are marked with * on the list below.

### Sessions (Instances) ###
# List sessions:             tmux ls
# New session:               tmux new -s <name>
# Attach to last:            tmux a
# Attach to specific:        tmux a -t <session-name>
# Kill session:              tmux kill-session -t <session-name>
# Detach from session:       Ctrl+A d

### Windows (Tabs) ###
# New window:                Ctrl+A c
# Next window:               Ctrl+A n  (or *Alt+K)
# Previous window:           Ctrl+A p  (or *Alt+J)
# Switch to window #:        Ctrl+A <number>
# Rename window:             Ctrl+A ,  (or *Ctrl+A r)
# Kill window:               Ctrl+A &
# List windows:              Ctrl+A w

### Panes (Splits) ###
# Split vertically:         *Ctrl+A v  (default is Ctrl+A %)
# Split horizontally:       *Ctrl+A h  (default is Ctrl+A ")
# Visual splits:             Ctrl+A |  (vertical) or Ctrl+A -  (horizontal)
# Navigate panes:            Ctrl+A <arrow keys>
# Resize panes:              Ctrl+A Ctrl+<arrow keys>
# Even vertical layout:     *Ctrl+A Ctrl+H
# Even horizontal layout:   *Ctrl+A Ctrl+V
# Kill pane:                 Ctrl+A x
# Break pane to window:     *Ctrl+A Ctrl+J
# Join pane (prompted):     *Ctrl+A j
# Sync panes:               *Ctrl+A Ctrl+\

### Copy Mode (scrolling/searching) ###
# Enter copy mode:           Ctrl+A [
# Exit copy mode:            q or Escape
# Search up:                 ? (in copy mode)
# Search down:               / (in copy mode)
# Page up/down:              Page Up/Down or Ctrl+B/Ctrl+F

### Mouse Mode Notes ###
# Toggle:       Ctrl+A m
# Mouse ON:     Can scroll, click panes, resize, but text selection is weird
# Mouse OFF:    Normal text selection, but no scrolling (use Ctrl+A [ instead)

### Sessions Management ###
# Reload config:            *Ctrl+A Ctrl+R
# Rename session:           *Ctrl+A Ctrl+S  (default is Ctrl+A $)
# Session picker:            Ctrl+A s
# Window switching:         *Alt+J (prev), Alt+K (next)  (no prefix key)
# Window renumbering:        Ctrl+A :movew -r

#####################
### Configuration ###
#####################

# Enable mouse (on = bad text selection, off = no scrolling)
set -g mouse on

# m to toggle mouse mode
unbind m
bind-key m set-option -gF mouse "#{?mouse,off,on}" \; display-message "#{?mouse,Mouse: ON,Mouse: OFF}"

# Set default terminal
set -g default-terminal "xterm-256color"

# Higher history limit
set -g history-limit 100000

# Automatically renumber windows
set-option -g renumber-windows on

################
# Key Bindings #
################

# Set Ctrl+A as prefix
unbind C-b
set -g prefix C-a

# Ctrl+R to reload tmux config
unbind C-r
bind C-r source-file ~/.tmux.conf \; display "  reloaded tmux.conf"

# R to rename window
unbind r
bind-key r command-prompt "rename-window '%%'" # custom renamer (start blank)
# bind-key r command-prompt -I "#W" "rename-window '%%'" # native renamer (use existing name)

# Ctrl+S to rename session
unbind C-s
bind C-s command-prompt "rename-session '%%'"

# Replace keys to split panes
unbind v        # Not used by default
unbind h        # Not used by default
unbind %        # Split vertically by default
unbind '"'      # Split horizontally by default
bind v split-window -h -c "#{pane_current_path}"
bind h split-window -v -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Prompted join-pane
bind-key j command-prompt -p "join pane from: " "join-pane -h -s '%%'"
bind C-j break-pane

# Distribute panes evenly
unbind C-h
unbind C-v
bind C-h select-layout even-vertical
bind C-v select-layout even-horizontal

# Cycle through panes (like Alt+Tab)
bind Tab select-pane -t :.+

# Cycle through built-in layouts when things get messy
bind Space next-layout

# Alt+K for next window, Alt+J for previous window (no prefix key)
bind -n M-j previous-window
bind -n M-k next-window

# Ctrl+\ to synchronize panes
unbind C-\\
bind C-\\ setw synchronize-panes\; display "  synchronize panes now set to #{pane_synchronized}"

#################
# Visual Design #
#################

# Activity and notifications
set -g bell-action none
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off

# Message style
set-option -g message-style fg=yellow,bg=black

# Modes
setw -g clock-mode-colour colour5
setw -g mode-style 'fg=colour1 bg=colour18 bold'

# Status bar
set -g status-position bottom
set -g status-justify left
set -g status-style 'bg=#1a1b26 fg=#c0caf5'
set -g status-interval 2

# Left: Session with directory-style icon
set -g status-left '#[fg=#89ddff]󰆍 #[fg=#7aa2f7,bold]#S #[fg=#565f89]│ '

# Right: Multiple info blocks
set -g status-right '#[fg=#565f89]#(tmux-mem-cpu-load --interval 1 -g 4 -a 0) #[fg=#565f89]│ #[fg=#9ece6a] #[fg=#c0caf5]%a %-m/%-d #[fg=#565f89]│ #[fg=#89ddff]#[fg=#c0caf5]%l:%M %p '

# Make the right side shorter on narrow terminals
set -g status-right-length 80

# Panes
set -g pane-border-style 'fg=#565f89'
set -g pane-active-border-style 'fg=#7aa2f7'

# Current window (active tab)
setw -g window-status-current-style 'fg=#1a1b26 bg=#7aa2f7 bold'
setw -g window-status-current-format ' #I#[fg=#1a1b26]:#[fg=#1a1b26]#W '

# Other windows (inactive tabs)
setw -g window-status-style 'fg=#565f89 bg=#1a1b26'
setw -g window-status-format ' #I#[fg=#737aa2]:#[fg=#c0caf5]#W '

# Messages
set-option -g message-style 'fg=#ff9e64 bg=#1a1b26'

# Copy mode
setw -g mode-style 'fg=#1a1b26 bg=#89ddff bold'
